---
title: プラットフォーマー チュートリアル Part 5：収集コインをゲームに追加しよう
---
# プラットフォーマー チュートリアル Part 5：収集コインをゲームに追加しよう

今回は収集コインをゲームに追加する方法を説明します。

次の内容を含んでいます。

- プレイヤーが接触したときにオブジェクトを削除する（サウンドも再生する）
- 変数を使ってデータを管理する
- シーンにテキストを追加する

## シリーズ

いま読んでいるのは[プラットフォーマー チュートリアル](/ja/gdevelop5/tutorials/platformer)の **Part 5** です。

1. [プラットフォーマー チュートリアル Part 1](/ja/gdevelop5/tutorials/platformer)
2. [プラットフォーマー チュートリアル Part 2](/ja/gdevelop5/tutorials/platformer/part-2)
3. [プラットフォーマー チュートリアル Part 3](/ja/gdevelop5/tutorials/platformer/part-3)
4. [プラットフォーマー チュートリアル Part 4](/ja/gdevelop5/tutorials/platformer/part-4)
5. プラットフォーマー チュートリアル Part 5
6. [プラットフォーマー チュートリアル Part 6](/ja/gdevelop5/tutorials/platformer/part-6)
7. [プラットフォーマー チュートリアル Part 7](/ja/gdevelop5/tutorials/platformer/part-7)
8. [プラットフォーマー チュートリアル Part 8](/ja/gdevelop5/tutorials/platformer/part-8)


## ステップ 1: 収集コインを作成する

最初に、プレイヤーが収集できるコインを作成します。このステップは 2 つのパートに分けられます。コインの作成をする部分と、プレイヤーの接触を感知するイベントによってコインを収集可能にする部分です。

### コインのオブジェクトを作成する

1. 「Coin」という名前の**スプライト**オブジェクトを作成します。
2. オブジェクトの画像にアセットの「coin.png」を指定します。
3. オブジェクトをシーンにドラッグして、1 個以上のインスタンスを配置します。

![](/gdevelop5/tutorials/platformer/05-01-coin-object.jpg)

!!! note

    シーンに配置済みのコインを複製するには、`Ctrl` キー（macOS の場合は `Cmd` キー）を押しながら、コインのインスタンスをドラッグします。

### コインを収集可能にする

1. 新しいイベントを作成します。
2. 「Player」オブジェクトの**衝突**条件をイベントに追加して、「Coin」との接触をテストします。
3. **オブジェクトを削除する**アクションをイベントに追加して、「Coin」オブジェクトを削除するように設定します。
4. **サウンドを再生する**アクションをイベントに追加して、プレイヤーがコインを収集したときの効果音を再生します（効果音には「coin.wav」アセットを使います）。

![](/gdevelop5/tutorials/platformer/05-02-coin-collectible.jpg)

ゲームをプレビューして、プレイヤーがコインと接触するとコインが消えて効果音が鳴ることを確認しましょう。

![](/gdevelop5/tutorials/platformer/05-02-collect-coin-preview.gif)

## ステップ 2: 収集コインを管理する

ユーザーがコインを収集するたびに、プレイヤーが獲得したコインの数を更新して記憶しておく必要があります。そのために、[変数](/ja/gdevelop5/all-features/variables)を使います。

変数とは、データを格納する容れ物のことです。代数を習ったことがある人なら、変数はおなじみのはずです。よく「x」とか「y」とかの文字で表されていた、アレです。

GDevelop には 3 種類の変数があります。

* オブジェクト変数
* シーン変数
* グローバル変数

変数の種類それぞれについての詳しい説明はこのチュートリアルの取り扱い範囲を超えるため、[変数のスコープ](http://wiki.compilgames.net/doku.php/ja/gdevelop5/all-features/variables#スコープ)で違いを確認してみてください。今回の場合は、シーン変数を使うのがいいでしょう。この変数は、シーンのあいだじゅう存在し続けます。

集めたコインの数を管理するシーン変数の作り方は、次の通りです。

1. **シーン変数の値**アクション（変数カテゴリーの下にあります）を、手前で作成したイベントに追加します。
2. **変数**フィールドに「Score」と入力します。これが変数の名前になります。
3. **変更記号**ドロップダウンリストから**+（足す）**を選択します。
4. **値**フィールドに「1」と入力します（二重引用符は要りません）。
5. **OK**をクリックします。

![](/gdevelop5/tutorials/platformer/05-03-scene-variable.jpg)

これでプレイヤーが集めたコインの数を管理できるようになりました。ただし、コインの数は（まだ）画面に表示されません。

## ステップ 3: 集めたコインの数を表示する

集めたコインの数を表示するには、テキストを表示するオブジェクトと、そこに表示するテキストを更新するイベントが必要です。

### テキストを表示するオブジェクトを作成する

1. 「Score」という名前の**テキスト**オブジェクトを作成します。
2. **最初に表示するテキスト**フィールドに「スコア：0」と入力します。これがオブジェクトに表示されるデフォルトのテキストになります。
3. **適用**をクリックします。
4. オブジェクトをシーンにドラッグしてインスタンスを配置します。

![](/gdevelop5/tutorials/platformer/05-04-text-object.jpg)

### 集めたコインの数で「Score」オブジェクトを更新する

コイン数を表示するテキストを更新する前に、ここで[式](/ja/gdevelop5/expressions)について確認しておきましょう。

GDevelop の式は、表計算ソフトの数式や、プログラミング言語の関数のようなものです。式には値を渡して、結果の値を受け取ることができます。

たとえば「Score」変数の値を取得するための `Variable` 式は次のようになります。

```
Variable(Score)
```

「Score」変数は数値を格納しているので、この式は数値を返します。数値は `ToString` 式を使って文字列に変換できます。

```
ToString(Variable(Score))
```

式は GDevelop の最も高度な、そして最もパワフルな概念のひとつです。この概念をすぐに理解できなかったとしても、心配しないでください。このチュートリアルにしたがって、式を*実際に使う*のが秘訣です。実践ほど役に立つものはありません。

集めたコインの数で「Score」オブジェクトを更新する方法は、次の通りです。

1. 新しいイベントを作成します。
2. 条件を指定せずに、「Score」オブジェクトに対する**テキストを修正する**アクションを追加します。条件を指定しないと、アクションは必ず毎フレーム実行されます。これによって、スコアを常に正確に表示できます。
3. **変更記号**ドロップダウンリストから**=（代入）**を選択します。
4. **値**フィールドに `"スコア：" + ToString(Variable(Score))` と入力します。`ToString` と `Variable` 式で、集めたコインの数値を文字列に変換しています。また `+` 演算子で 2 つの文字列を 1 つに連結しています。
5. **OK**をクリックします。

![](/gdevelop5/tutorials/platformer/05-05-modify-text-object.jpg)

ゲームをプレビューすると、収集コインが画面に表示されます。

![](/gdevelop5/tutorials/platformer/05-06-score-preview.gif)

!!! tip
    
        値フィールドの脇に表示される青いアイコンをクリックすると、_式エディター_が表示されます。
    
    ![](/gdevelop5/tutorials/platform-game/expression-icon.png)
    
    カテゴリー別に分類された利用可能なすべての式を、そこで検索できます。
    
    ![](/gdevelop5/tutorials/platform-game/expression-editor.png)
    

### テキストを別のレイヤーに移動する

「Score」オブジェクトには問題が一つあります。集めたコインの数は、プレイヤーが特定の位置にいるあいだだけ見えていて、プレイヤーが移動すると画面から外れてしまうのです。

この問題を解決するには、「Score」オブジェクトを別のレイヤーに移動する必要があります。

1. **レイヤーエディターを開く**アイコンをクリックします。
2. **レイヤーを追加**をクリックします。
3. レイヤー名に「UI」と入力します。
4. シーンエディターの「Score」インスタンスを選択します。
5. プロパティパネルの**レイヤー**ドロップダウンリストから**UI**を選択します。

![](/gdevelop5/tutorials/platformer/05-07-change-layer.gif)

ゲームをプレビューすると、スコアが同じ位置に固定されているはずです。

![](/gdevelop5/tutorials/platformer/05-08-score-ui-layer-preview.gif)

## 次のステップ

次は[プラットフォーマー チュートリアル Part 6](/ja/gdevelop5/tutorials/platformer/part-6) です。